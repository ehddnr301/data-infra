# Airflow Standalone (단일 컨테이너)
# 사용법:
#   docker compose up -d --build    # 빌드 + 실행
#   docker compose logs -f          # 로그 확인
#   docker compose down             # 종료
#
# 초기 admin 비밀번호는 로그에 출력됩니다:
#   docker compose logs airflow | grep password

services:
  airflow:
    build: .
    container_name: airflow-pseudolab
    ports:
      - "30022:8080"
    volumes:
      - ./dags:/opt/airflow/dags
      - ./data:/opt/airflow/data
      - ./config.yaml:/opt/airflow/config.yaml:ro
    env_file:
      - .env
    environment:
      AIRFLOW__CORE__LOAD_EXAMPLES: "false"
      AIRFLOW__CORE__DAGS_FOLDER: /opt/airflow/dags
    command: standalone
    restart: unless-stopped
